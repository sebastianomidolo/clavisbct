% Lista di items per estrazione da scaffali per lo scarto

\documentclass[a4paper,10pt]{article}

\usepackage[a4paper, top=20mm, bottom=10mm, left=32mm, right=20mm]{geometry}

\usepackage{fancyhdr}
\setlength{\headheight}{1pt}
\pagestyle{fancy}


\textwidth=20cm

% \usepackage[utf8]{inputenc}
\usepackage[utf8x]{inputenc}

% \usepackage{multicol}

\linespread{1.3}

\hoffset=-22mm
% \voffset=-28mm


\textheight=28cm

\usepackage{supertabular}


\renewcommand{\headrulewidth}{0pt}
\pagestyle{fancy}

<%= "\\chead{#{inputdata.titolo_elenco} --- Stampa: #{Time.now.to_date}}" %>

\lfoot{}
\cfoot{}
\rfoot{}

\rhead{Prova \LaTeX}
\rfoot{Prova \LaTeX}



\begin{document}

% \pagestyle{empty}

% \head{x}

%\tablehead{\hline}
%\tabletail{\hline}

\tablefirsthead{%
\hline
\multicolumn{1}{|c|}{\#} &
\multicolumn{1}{l|}{Collocazione} &
Titolo &
Serie-Inv &
Anno &
Prestiti\\
\hline}

\tablehead{%
\multicolumn{6}{l}{\small\sl (\ldots continua dalla pagina precedente)}\\
\hline
\multicolumn{1}{|c}{\#} &
\multicolumn{1}{l|}{Collocazione} &
Titolo &
Serie-Inv &
Anno &
Prestiti\\
\hline}

\tabletail{%
\multicolumn{6}{r}{\small\sl continua\ldots}
}

\tablelasttail{\hline}



\begin{supertabular}{|r|l|l|l|l|l|}


<%
 res=[]	
 cnt=1
 compact = inputdata.length > 60 ? true : false
 inputdata.each do |e|
   ultimo_prestito = e.ultimo_prestito.blank? ? '' : " (#{e.ultimo_prestito[0..3]})"
   prestiti = e.prestiti.to_i == 0 ? 'nessuno' : "#{e.prestiti}#{ultimo_prestito}"
   e['title'].gsub!("&", '\\\&')
   e['title'].gsub!("%", '\\\%')
   res << "#{cnt} & {\\Large #{e.collocazione[0..16]}} & #{e['title'][0..45]} & #{e.inventory_serie_id}-#{e.inventory_number} & #{e.print_year} & #{prestiti} \\\\"
   cnt+=1
 end
 #  res << "\\markboth{uno}{due}"
%>
<%= res.join("\n") %>

\end{supertabular}

\end{document}
